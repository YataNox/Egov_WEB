<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ezen.main.dao.BoardDAO">
	
	<resultMap type="ezen.main.dto.BoardVO" id="bbsVO">
		<result property="num" column="NUM"/>
		<result property="pass" column="PASS"/>
		<result property="imgfilename" column="IMGFILENAME"/>
		<result property="userid" column="USERID"/>
		<result property="email" column="EMAIL"/>
		<result property="title" column="TITLE"/>
		<result property="content" column="CONTENT"/>
		<result property="readcount" column="READCOUNT"/>
		<result property="replycnt" column="REPLYCNT"/>
		<result property="writedate" column="WRITEDATE"/>
	</resultMap>

	<!-- <select id="getBoard" statementType="CALLABLE" resultType="ezen.main.dto.BoardVO" >
      	select * from board order by num desc
   </select> -->
   
   <select id="getBoard" statementType="CALLABLE" parameterType="ezen.main.dto.TransferVO">
      	{ CALL selectBoard(#{list, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=bbsVO})}
   </select>
   
   <!-- <select id="getBoardOne" statementType="CALLABLE" resultType="ezen.main.dto.BoardVO" >
   		select * from board where num = #{param1}
   </select> -->
   
   <select id="getBoardOne" statementType="CALLABLE" parameterType="ezen.main.dto.TransferVO">
   		{ CALL selectBoardOne(
   				#{num}, 
   				#{list, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=bbsVO}
   			)
   		}
   </select>
   
   <insert id="insertBoard" statementType="CALLABLE" parameterType="ezen.main.dto.BoardVO">
   		insert into board(num, userid, pass, email, title, content)
   		values(board_seq.nextVal, #{userid}, #{pass}, #{email}, #{title}, #{content})
   </insert>
   
   <update id="updateBoard" statementType="CALLABLE" parameterType="ezen.main.dto.BoardVO">
   		update board set pass=${pass}, email=#{email}, title=#{title}, content=#{content} where userid=#{userid}
   </update>
   
   <delete id="deleteBoard" statementType="CALLABLE">
   		delete from board where num=#{param1}
   </delete>
</mapper>